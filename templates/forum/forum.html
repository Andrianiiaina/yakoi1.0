
{% extends 'base.html'%}
{% load static%}
{% load crispy_forms_tags%}
{% block content%}

<div class="container">  
    <div class="row mb-5 mt-5 row2">
        <div class="col-md-6 mt-5 mb-2">
            <h2 style="color:orangered">Forum YaKoi</h2>
            <p>Demandez des renseignement, des conseils, posez vos questions, ou juste discutez avec les membres...</p>
           
        {% if request.user.is_authenticated%}    
        <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#createEvenementModal">
            Commencer une discussion
        </button>
        {% endif%}

        </div>
        <div class="col-md-6 mt-5 mb-2">
            <form method="GET" action="{% url 'event_search'%}">   
                <input type="text" name="query" placeholder="Rechercher un evenement" id="search_input"/>
                <button id="search_button">rechercher</button>
            </form>
        </div>
    </div>
    <div class="row">         
            <div class="col-md-10">
                <div class="row">
                            {% regroup forums|dictsort:"category" by category as forum_list %}
                            {% for forum in forum_list %}
                                        <h4>{{forum.grouper | upper}}</h4>
                                        {% for forum in forum.list %}
                                        <div class="m-2">                                                                                      
                                                    <div class="">                        
                                                            <strong> 
                                                                <a href="{% url 'profile' forum.user.username%}" class="txt-link-to-grey">@{{ forum.user.username}}</a>
                                                            </strong>
                                                            
                                                    <a href="{% url 'forum_detail' forum.pk%}" class="txt-link-to-grey mt-2">
                                                            <p class="pb-3 mb-0 small lh-sm border-bottom">{{ forum.description | truncatewords:20}}</p>                                                                                           
                                                        </a> 
                                                        </div>  
                                                      
                                                </div>                                    
                                        {% endfor %}
                                    
                                          
                            {% endfor %}
                </div>  
            </div>

            {% include 'composants/pagination.html' with evenements=forums%}   
            {% include 'forum/create_forum_modal.html' with form=form%} 

    </div>
</div>

{% endblock content%}