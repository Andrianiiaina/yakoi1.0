{% load static %}
{% load custom_tags%}
<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'bootstrap.css' %}"/>
    <link rel="stylesheet" href="{% static 'appi.css' %}"/>

    {% block css %}
    {% endblock css%}
    <style>
    
        .container-fluid.base {
            margin-top: 80px;
        }
        div#MyDiv > button, div#MyDiv2 > button {
            margin: 3px;
            padding: 5px;
            border: 1px solid gray;
            border-radius: 4px;
        }
    </style>
    <title>Document</title>
</head>
<body>
    

    <div class="container">
        <nav class="navbar navbar-expand-lg bg-light fixed-top">
            <div class="container-fluid">
                <a class="navbar-brand" href="#"><img src="/media/az.png" width="70px" height="50px"/></a>
                <button type="button" class="navbar-toggler bg-dark" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'event_list'%}"><i class="far fa-home"></i>Accueil</a></li>
                        <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'voyages'%}">Voyage organisé</a> </li> 
                        <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'forum_list'%}">Forum</a> </li> 
                        <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'evenements'%}">Le grand calendrier</a> </li>
                        
                        {% if request.user.is_authenticated%}
                            <li class="nav-item dropdown">
                            
                                    {%show_notifications%}
                                
                            </li>   
                        {%endif%}
                        
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        {% if request.user.is_authenticated%}
                          
                            <li class="nav-item dropdown  px-5">
                                <a href="#" class="dropdown-toggle nav-link link-secondary pr-5" id="navbarDropdown" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                                   plus</a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                            <li class="dropdown-item-parent">
                                                <a class="dropdown-item" href="{% url 'profile' request.user.username %}">Voir mon profile</a>
                                            </li>
                                            
                                            <li class="dropdown-item-parent">
                                                    <a class="dropdown-item" href="{% url 'profile_edit' user.pk%}">Modifier mon profile</a>
                                                
                                            </li>
                                            <li class="dropdown-item-parent">
                                                <a class="dropdown-item" href="{% url 'account_logout' %}">Se deconnecter</a>
                                            </li>
                                           
                                </ul>
                            </li>
                            
                        </li>   
    
                        {% else %} 
                            <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'login' %}">Se connecter</a></li>
                            <li class="nav-item"><a class="nav-link link-secondary px-2" href="{% url 'signup' %}">S'inscrire</a></li>
                                
                        {%endif%}    
                    </ul>
                    
                </div>
            </div>
        </nav>
    </div>

    <div class="container-fluid base">
        {% if messages%}
            {% for message in messages %}
                <div class="alert alert-success">              
                    {{message}}
                </div>
            {%endfor%}
        {%endif%}
        {% block content %}
        {% endblock content%}

    </div>
    <div class="footer">
        <center>
            <h4>Yakoi!</h4>
            <p>
                © 2021 - Yakoi.fr - Tous droits réservés
                

            </p>     
             <small> Qui sommes nous?| Tél: 0348754875 | e-mail: yakoi@gmail.com | facebook: Yakoi Madagascar |Devenir membre | Espace pro | Publicité | Partenariat |Organisateur d'évenement</small>
  
        </center>
     </div>
            
   

    <script src="{% static 'bootstrap2.js'%}" ></script>
    <script>
        
 function show(){
    const container = document.getElementById('notification-container');
    if (container.classList.contains('d-none')){
        container.classList.remove('d-none');
    }else{
        container.classList.add('d-none')
    }
}
function formatTags() {
    var elements = document.getElementsByClassName('body');
    let new_element=""
    for (let i = 0; i < elements.length; i++) {
        let bodyText = elements[i].children[0].innerText;
        let words = bodyText.split(' ');

        for (let j = 0; j < words.length; j++) {
            if (words[j][0] === '#') {
              replaced='<a href=/yakoi/évènement/explorer?query='+words[j].substring(1)+'>'+words[j]+'</a>'
              words[j]=replaced          
              
            }         
            new_element= new_element + " "+words[j]            
        }
        elements[i].innerHTML = new_element             
    }

}

function tagger(){
  
    listes=[]
    liste= document.getElementsByName('tagger');
  
    for(let i=1;i<=liste.length;i++){
        listes[i]= document.getElementById("pp"+i);
    }
    for (let i=1;i<listes.length;i++){
        listes[i].addEventListener('click', function() {
        
        document.getElementById('MyDiv').removeChild(listes[i])
        document.getElementById('MyDiv2').appendChild(listes[i]);

        });
    }
}
tagger()
formatTags();
    </script>
    
    
</body>
